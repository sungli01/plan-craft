<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Progress Test - Time-based Calculation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-case {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .pass {
            background: #d4edda;
            color: #155724;
        }
        .fail {
            background: #f8d7da;
            color: #721c24;
        }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”¬ ì§„í–‰ë°” ë™ê¸°í™” í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-case">
        <h2>Test Case 1: ì´ë¯¸ì§€ ë°ì´í„° (12ë¶„ 11ì´ˆ ê²½ê³¼, 7ë¶„ 49ì´ˆ ë‚¨ìŒ)</h2>
        <p><strong>ì…ë ¥:</strong></p>
        <ul>
            <li>ê²½ê³¼ ì‹œê°„: 12ë¶„ 11ì´ˆ = 731ì´ˆ</li>
            <li>ë‚¨ì€ ì‹œê°„: 7ë¶„ 49ì´ˆ = 469ì´ˆ</li>
            <li>ì´ ì˜ˆìƒ ì‹œê°„: 731 + 469 = 1200ì´ˆ (20ë¶„)</li>
        </ul>
        <p><strong>ê³„ì‚°:</strong></p>
        <div id="calc1"></div>
        <div class="progress-bar">
            <div id="progress1" class="progress-fill"></div>
        </div>
        <div id="result1" class="result"></div>
    </div>

    <div class="test-case">
        <h2>Test Case 2: ë‹¨ìˆœ ì¼€ì´ìŠ¤ (10ë¶„ ê²½ê³¼, 10ë¶„ ë‚¨ìŒ)</h2>
        <p><strong>ì…ë ¥:</strong></p>
        <ul>
            <li>ê²½ê³¼ ì‹œê°„: 10ë¶„ = 600ì´ˆ</li>
            <li>ë‚¨ì€ ì‹œê°„: 10ë¶„ = 600ì´ˆ</li>
            <li>ì´ ì˜ˆìƒ ì‹œê°„: 1200ì´ˆ (20ë¶„)</li>
        </ul>
        <p><strong>ê³„ì‚°:</strong></p>
        <div id="calc2"></div>
        <div class="progress-bar">
            <div id="progress2" class="progress-fill"></div>
        </div>
        <div id="result2" class="result"></div>
    </div>

    <div class="test-case">
        <h2>Test Case 3: ê±°ì˜ ì™„ë£Œ (18ë¶„ ê²½ê³¼, 2ë¶„ ë‚¨ìŒ)</h2>
        <p><strong>ì…ë ¥:</strong></p>
        <ul>
            <li>ê²½ê³¼ ì‹œê°„: 18ë¶„ = 1080ì´ˆ</li>
            <li>ë‚¨ì€ ì‹œê°„: 2ë¶„ = 120ì´ˆ</li>
            <li>ì´ ì˜ˆìƒ ì‹œê°„: 1200ì´ˆ (20ë¶„)</li>
        </ul>
        <p><strong>ê³„ì‚°:</strong></p>
        <div id="calc3"></div>
        <div class="progress-bar">
            <div id="progress3" class="progress-fill"></div>
        </div>
        <div id="result3" class="result"></div>
    </div>

    <div class="test-case">
        <h2>Test Case 4: í˜„ì¬ ì½”ë“œ ì‹œë®¬ë ˆì´ì…˜</h2>
        <p><strong>ì‹œë‚˜ë¦¬ì˜¤:</strong> Phase ê¸°ë°˜ vs ì‹œê°„ ê¸°ë°˜ ë¹„êµ</p>
        <div id="calc4"></div>
        <div id="result4" class="result"></div>
    </div>

    <script>
        // Test function
        function testProgress(testId, elapsed, remaining) {
            const total = elapsed + remaining;
            const timeBasedProgress = total > 0 ? Math.min(100, Math.round((elapsed / total) * 100)) : 0;
            
            // Display calculation
            document.getElementById(`calc${testId}`).innerHTML = `
                <code>progress = (${elapsed} / ${total}) Ã— 100 = ${timeBasedProgress}%</code>
            `;
            
            // Update progress bar
            const progressEl = document.getElementById(`progress${testId}`);
            progressEl.style.width = `${timeBasedProgress}%`;
            progressEl.textContent = `${timeBasedProgress}%`;
            
            return timeBasedProgress;
        }
        
        // Run tests
        function runTests() {
            // Test 1: Image data (12min 11s elapsed, 7min 49s remaining)
            const test1 = testProgress(1, 731, 469);
            const expected1 = 61; // (731/1200)*100 = 60.92%
            const result1 = document.getElementById('result1');
            if (Math.abs(test1 - expected1) <= 1) {
                result1.className = 'result pass';
                result1.textContent = `âœ… PASS: ${test1}% (ì˜ˆìƒ: ${expected1}%, ì˜¤ì°¨: ${Math.abs(test1 - expected1)}%)`;
            } else {
                result1.className = 'result fail';
                result1.textContent = `âŒ FAIL: ${test1}% (ì˜ˆìƒ: ${expected1}%, ì˜¤ì°¨: ${Math.abs(test1 - expected1)}%)`;
            }
            
            // Test 2: Simple case (10min / 20min)
            const test2 = testProgress(2, 600, 600);
            const expected2 = 50;
            const result2 = document.getElementById('result2');
            if (test2 === expected2) {
                result2.className = 'result pass';
                result2.textContent = `âœ… PASS: ${test2}% (ì˜ˆìƒ: ${expected2}%)`;
            } else {
                result2.className = 'result fail';
                result2.textContent = `âŒ FAIL: ${test2}% (ì˜ˆìƒ: ${expected2}%)`;
            }
            
            // Test 3: Almost done (18min / 20min)
            const test3 = testProgress(3, 1080, 120);
            const expected3 = 90;
            const result3 = document.getElementById('result3');
            if (test3 === expected3) {
                result3.className = 'result pass';
                result3.textContent = `âœ… PASS: ${test3}% (ì˜ˆìƒ: ${expected3}%)`;
            } else {
                result3.className = 'result fail';
                result3.textContent = `âŒ FAIL: ${test3}% (ì˜ˆìƒ: ${expected3}%)`;
            }
            
            // Test 4: Phase-based vs Time-based comparison
            const calc4 = document.getElementById('calc4');
            const result4 = document.getElementById('result4');
            
            // Simulate 10 phases, 10 steps each = 100 steps total
            // If at phase 3, step 2 => 32% (phase-based)
            // If elapsed 731s / 1200s total => 61% (time-based)
            const phaseBased = 32;
            const timeBased = 61;
            const difference = timeBased - phaseBased;
            
            calc4.innerHTML = `
                <p><strong>Phase ê¸°ë°˜ ê³„ì‚°:</strong> Phase 3, Step 2 / 100 Steps = ${phaseBased}%</p>
                <p><strong>ì‹œê°„ ê¸°ë°˜ ê³„ì‚°:</strong> 731ì´ˆ / 1200ì´ˆ = ${timeBased}%</p>
                <p><strong>ì°¨ì´:</strong> ${difference}% (${difference > 0 ? 'ì‹œê°„ì´ ë” ë¹ ë¦„' : 'ë‹¨ê³„ê°€ ë” ë¹ ë¦„'})</p>
            `;
            
            result4.className = 'result fail';
            result4.innerHTML = `
                <strong>âš ï¸ ì´ë¯¸ì§€ì˜ 32% ì§„í–‰ë°”ëŠ” Phase ê¸°ë°˜ ê³„ì‚°ì…ë‹ˆë‹¤!</strong><br>
                ì‹œê°„ ê¸°ë°˜ìœ¼ë¡œ ì •í™•íˆ ê³„ì‚°í•˜ë©´ <strong>${timeBased}%</strong>ì—¬ì•¼ í•©ë‹ˆë‹¤.<br>
                <br>
                <strong>ë¬¸ì œ ì›ì¸:</strong> updateAllUI()ê°€ í˜¸ì¶œë˜ì§€ ì•Šê±°ë‚˜, executePhase()ê°€ ë®ì–´ì“°ê³  ìˆì„ ê°€ëŠ¥ì„±
            `;
        }
        
        // Run tests on load
        runTests();
        
        // Update every second to show live calculation
        setInterval(runTests, 1000);
    </script>
</body>
</html>
